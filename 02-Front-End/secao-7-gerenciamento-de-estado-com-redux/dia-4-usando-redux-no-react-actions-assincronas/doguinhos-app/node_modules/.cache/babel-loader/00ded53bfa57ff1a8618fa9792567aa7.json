{"ast":null,"code":"// src/store/index.js\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport composeWithDevTools from '@redux-devtools-extensions';\nconst GET_IMAGE = 'GET_IMAGE';\nconst REQUEST_IMAGE = 'REQUEST_IMAGE';\nconst FAILED_REQUEST = 'FAILED_REQUEST';\n\nfunction getImage(json) {\n  return {\n    type: GET_IMAGE,\n    payload: json.message\n  };\n}\n\nfunction requestDog() {\n  return {\n    type: REQUEST_IMAGE\n  };\n}\n\nfunction failedRequest(error) {\n  return {\n    type: FAILED_REQUEST,\n    payload: error\n  };\n}\n\nexport function fetchDog() {\n  return dispatch => {\n    dispatch(requestDog());\n    return fetch('https://dog.ceo/api/breeds/image/random').then(response => response.json()).then(json => dispatch(getImage(json))).catch(error => dispatch(failedRequest(error)));\n  };\n}\nconst initialState = {\n  isFetching: false,\n  imagePath: '',\n  error: ''\n};\n\nfunction reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case REQUEST_IMAGE:\n      return { ...state,\n        isFetching: true\n      };\n\n    case GET_IMAGE:\n      return { ...state,\n        imagePath: action.payload,\n        isFetching: false\n      };\n\n    case FAILED_REQUEST:\n      return { ...state,\n        error: action.payload,\n        isFetching: false\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\nexport default store;","map":{"version":3,"names":["createStore","applyMiddleware","thunk","composeWithDevTools","GET_IMAGE","REQUEST_IMAGE","FAILED_REQUEST","getImage","json","type","payload","message","requestDog","failedRequest","error","fetchDog","dispatch","fetch","then","response","catch","initialState","isFetching","imagePath","reducer","state","action","store"],"sources":["/home/natalia/TRYBE/trybe-exercicios/02-Front-End/secao-7-gerenciamento-de-estado-com-redux/dia-4-usando-redux-no-react-actions-assincronas/doguinhos-app/src/store/index.js"],"sourcesContent":["// src/store/index.js\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport composeWithDevTools from '@redux-devtools-extensions';\n\n\nconst GET_IMAGE = 'GET_IMAGE';\nconst REQUEST_IMAGE = 'REQUEST_IMAGE';\nconst FAILED_REQUEST = 'FAILED_REQUEST';\n\nfunction getImage(json) {\n  return { type: GET_IMAGE, payload: json.message };\n}\n\nfunction requestDog() {\n  return { type: REQUEST_IMAGE };\n}\n\nfunction failedRequest(error) {\n  return { type: FAILED_REQUEST, payload: error };\n}\n\nexport function fetchDog() {\n  return (dispatch) => {\n    dispatch(requestDog());\n    return fetch('https://dog.ceo/api/breeds/image/random')\n      .then(response => response.json())\n      .then(json => dispatch(getImage(json)))\n      .catch(error => dispatch(failedRequest(error)))\n  };\n}\n\nconst initialState = {\n  isFetching: false,\n  imagePath: '',\n  error: '',\n};\n\nfunction reducer(state = initialState, action) {\n  switch (action.type) {\n    case REQUEST_IMAGE:\n      return { ...state, isFetching: true };\n    case GET_IMAGE:\n      return { ...state, imagePath: action.payload, isFetching: false };\n    case FAILED_REQUEST:\n      return { ...state, error: action.payload, isFetching: false };\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\n\nexport default store;"],"mappings":"AAAA;AACA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,OAA7C;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,mBAAP,MAAgC,4BAAhC;AAGA,MAAMC,SAAS,GAAG,WAAlB;AACA,MAAMC,aAAa,GAAG,eAAtB;AACA,MAAMC,cAAc,GAAG,gBAAvB;;AAEA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;EACtB,OAAO;IAAEC,IAAI,EAAEL,SAAR;IAAmBM,OAAO,EAAEF,IAAI,CAACG;EAAjC,CAAP;AACD;;AAED,SAASC,UAAT,GAAsB;EACpB,OAAO;IAAEH,IAAI,EAAEJ;EAAR,CAAP;AACD;;AAED,SAASQ,aAAT,CAAuBC,KAAvB,EAA8B;EAC5B,OAAO;IAAEL,IAAI,EAAEH,cAAR;IAAwBI,OAAO,EAAEI;EAAjC,CAAP;AACD;;AAED,OAAO,SAASC,QAAT,GAAoB;EACzB,OAAQC,QAAD,IAAc;IACnBA,QAAQ,CAACJ,UAAU,EAAX,CAAR;IACA,OAAOK,KAAK,CAAC,yCAAD,CAAL,CACJC,IADI,CACCC,QAAQ,IAAIA,QAAQ,CAACX,IAAT,EADb,EAEJU,IAFI,CAECV,IAAI,IAAIQ,QAAQ,CAACT,QAAQ,CAACC,IAAD,CAAT,CAFjB,EAGJY,KAHI,CAGEN,KAAK,IAAIE,QAAQ,CAACH,aAAa,CAACC,KAAD,CAAd,CAHnB,CAAP;EAID,CAND;AAOD;AAED,MAAMO,YAAY,GAAG;EACnBC,UAAU,EAAE,KADO;EAEnBC,SAAS,EAAE,EAFQ;EAGnBT,KAAK,EAAE;AAHY,CAArB;;AAMA,SAASU,OAAT,GAA+C;EAAA,IAA9BC,KAA8B,uEAAtBJ,YAAsB;EAAA,IAARK,MAAQ;;EAC7C,QAAQA,MAAM,CAACjB,IAAf;IACE,KAAKJ,aAAL;MACE,OAAO,EAAE,GAAGoB,KAAL;QAAYH,UAAU,EAAE;MAAxB,CAAP;;IACF,KAAKlB,SAAL;MACE,OAAO,EAAE,GAAGqB,KAAL;QAAYF,SAAS,EAAEG,MAAM,CAAChB,OAA9B;QAAuCY,UAAU,EAAE;MAAnD,CAAP;;IACF,KAAKhB,cAAL;MACE,OAAO,EAAE,GAAGmB,KAAL;QAAYX,KAAK,EAAEY,MAAM,CAAChB,OAA1B;QAAmCY,UAAU,EAAE;MAA/C,CAAP;;IACF;MACE,OAAOG,KAAP;EARJ;AAUD;;AAED,MAAME,KAAK,GAAG3B,WAAW,CAACwB,OAAD,EAAUrB,mBAAmB,CAACF,eAAe,CAACC,KAAD,CAAhB,CAA7B,CAAzB;AAEA,eAAeyB,KAAf"},"metadata":{},"sourceType":"module"}